---
name: agent-team-playbook
description: Claude Code の Agent Team が有効かを判断し、適切なら要件書 MD を生成してユーザーに提示する。「Agent Teamで〜」「並行処理で〜」「チームで〜」といった指示時に参照する。
---

# Agent Team Playbook

ユーザーが Agent Team での並行処理を希望したとき、適否を判断し、適切なら Claude Code に渡す要件書を生成する。

## ワークフロー

1. ユーザーが「Agent Teamで〜」と依頼する
2. プロジェクト状態を確認する（Input/ Output/ の中身、workflow.md の進捗）
3. 下記の判断基準で Agent Team の適否を評価する
   - 不適切な場合: 理由を説明し、project-manager での逐次実行を提案して終了
4. 該当するパターン定義（templates/）を読み込む
5. プロジェクトの実ファイルパス・論点で変数を埋め、要件書 MD を生成する
6. `Output/agent-team-requirements.md` に保存し、内容をユーザーに提示する
7. ユーザーが確認後、Claude Code にその内容を渡して実行する

## Agent Team の判断基準

以下をすべて満たす場合に Agent Team が有効:

- 同時並列で回せる独立タスクが3つ以上ある
- 各タスクが異なるファイルを出力する（競合しない）
- 1セッション内で完結できる規模
- 逐次実行と比べて時間短縮の実益がある

| 場面 | 推奨 | 理由 |
|------|------|------|
| 与件受領 → 提案一式 | Agent Team | 提案書と調査を並列で作成でき、成果物が独立している |
| クライアントフィードバック反映 | 逐次 | 単一ファイル修正。並列不要 |
| インタビュー1件の議事録 | 逐次 | 単一タスク。オーバーヘッドになる |
| 文字起こしが複数溜まった場合 | Agent Team | 複数議事録 + 調査を並列で処理 |
| 分析の方向性検討 | 逐次 | 人間との対話的探索が必要 |
| 報告書ドラフト + レビュー | Agent Team | 多角レビューの並列実行 |
| スライド作成 | 逐次 | スライド制作スキルで逐次処理 |
| 個別の修正・ブラッシュアップ | 逐次 | ファイル追加 → スキル実行 → レビューの反復 |

## パターン定義

| パターン | ファイル | 起動タイミング |
|----------|----------|---------------|
| 提案 | [templates/proposal.md](templates/proposal.md) | 与件受領後 |
| インタビュー後 | [templates/post-interview.md](templates/post-interview.md) | 文字起こしが複数溜まった場合 |
| 報告書 | [templates/report.md](templates/report.md) | 分析方向性が固まった段階 |

## 要件書のフォーマット

生成する要件書は以下の構造に従う。チーム構成・ワークフロー手順・ロール定義は含めない。Claude Code が要件から最適な構成を自律的に決める。

```
# Agent Team 要件書: {フェーズ名}

## 入力
- {実ファイルパスの列挙}

## 成果物
- {出力先} — {使用スキル}

## 制約
- {パターン由来の制約 + プロジェクト固有の制約}
```

## 注意事項

- Agent Team は Claude Code 固有の機能であり、Cursor では実行できない。このスキルは要件書の生成までを担う
- Cursor で逐次ワークフローを進める場合は project-manager スキルを呼び出す
