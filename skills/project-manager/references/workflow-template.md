# workflow.md テンプレート

プロジェクト初期化時に、以下のテンプレートを使用して `workflow.md` を作成する。

---

```markdown
# プロジェクト: [プロジェクト名]

## 基本情報
プロジェクト概要・クライアント・納期等は CLAUDE.md を参照。
- **ワークフロー**: [research-project-workflow / content-creation-workflow / ...]
- **ワークフローソース**: [predefined: skills/{workflow-skill}/ | custom: workflow.md]
- **プロジェクト種類**: [technology-research / market-research / interview-focused / due-diligence / ...]
- **開始日**: [YYYY-MM-DD]

## 現在の状態
- **フェーズ**: Phase 0 (提案)
- **ステップ**: Step 1 (提案書作成)
- **ステータス**: not_started
- **担当**: AI

## プロジェクト知識の現状
論点・仮説の検証状況・リスク等は [Output/プロジェクトサマリ.md](Output/プロジェクトサマリ.md) を参照。

## 重要な意思決定
<!-- スコープ変更・方針転換・クライアント指示など、プロジェクトの方向性に影響する決定を記録 -->

## 進捗チェックリスト

{ワークフロースキルのステップ一覧から動的に生成する}

## 成果物リンク

{ワークフロースキルの成果物一覧から動的に生成する}

## 履歴
| 日付 | ステップ | アクション | 備考 |
|------|----------|------------|------|
| [YYYY-MM-DD] | - | プロジェクト開始 | |
```

---

## ワークフロースキルの対応

| ワークフロー | 対応するプロジェクト種類 | スキルパス |
|--------------|--------------------------|------------|
| `research-project-workflow` | 調査プロジェクト（下記参照） | `skills/research-project-workflow/` |
| `content-creation-workflow` | コンテンツ作成（将来追加） | - |
| `business-planning-workflow` | 事業計画・戦略策定（将来追加） | - |
| `software-development-workflow` | ソフトウェア開発（将来追加） | - |

## プロジェクト種類の説明（調査プロジェクト）

| 種類ID | 名称 | 説明 |
|--------|------|------|
| `technology-research` | 技術動向調査 | 先端技術・プレイヤー探索にフォーカス |
| `market-research` | 市場調査 | 市場規模・セグメント、競合分析にフォーカス |
| `interview-focused` | インタビュー中心 | インタビュー設計・実施が主、定性的示唆 |
| `due-diligence` | デューデリジェンス | 財務・事業・技術の深掘り、リスク評価 |

## ステータスの説明

| ステータス | 説明 |
|------------|------|
| `not_started` | 未着手 |
| `in_progress` | 進行中 |
| `review_pending` | AIタスク完了、ユーザーレビュー待ち |
| `waiting_human` | 人間タスク待ち |
| `completed` | 完了 |
| `skipped` | スキップ（ユーザー判断で省略） |

## チェックリスト・成果物リンクの生成ルール

プロジェクト初期化時、ワークフローソースに応じてステップ一覧と成果物一覧を読み取り、`進捗チェックリスト` と `成果物リンク` を動的に生成する。

**生成手順**:
1. ワークフローソースを確認:
   - 定義済み（パスA）: ワークフロースキルの SKILL.md を読み込む
   - カスタム（パスB/C）: プロジェクトルートの `workflow.md` を読み込む
2. フェーズ・ステップ構造を抽出する
3. 各ステップの担当（`[AI]` / `[人間]` / `[AI → SubAgent]`）を反映する
4. 成果物一覧からリンクセクションを生成する
5. Step 1 に `← 現在` マーカーを付与する

**生成例（調査プロジェクトの場合）**:
```markdown
## 進捗チェックリスト

### Phase 0: 提案
- [ ] Step 1: 提案書作成 ← 現在 [AI]
- [ ] Step 2: 提案用スライド構成設計 [AI]
- [ ] Step 3: 初期デスクトップ調査 [AI → SubAgent]
- [ ] Step 4: 提案書更新 [AI]
- [ ] Step 5: インタビューガイド作成 [AI]
- [ ] Step 6: 最終報告書骨子案作成 [AI]

### Phase 1: 調査
- [ ] Step 7: インタビュー対象者選定 [AI]
- [ ] (インタビュー実施) [人間]
- [ ] Step 8: インタビュー議事メモ作成 [AI]
- [ ] Step 9: インタビューまとめ [AI]
- [ ] Step 10: デスクリサーチ [AI → SubAgent]

### Phase 2: 分析・とりまとめ
- [ ] Step 11: 統合・分析 [AI]
- [ ] Step 12: 報告書作成 [AI]
- [ ] Step 13: 報告用スライド構成設計 [AI]

## 成果物リンク
- 与件: [Input/与件.md](Input/与件.md)
- プロジェクトサマリ: (未作成)
- 提案書: (未作成)
- スライド構成（提案）: (未作成)
- インタビューガイド: (未作成)
- インタビュー対象者: (未作成)
- 議事録: (未作成)
- インタビューまとめ: (未作成)
- 報告書骨子: (未作成)
- 分析結果: (未作成)
- 最終報告書: (未作成)
- スライド構成（報告）: (未作成)
```

## 更新ルール

### 進捗管理

1. **AIタスク実行完了時**: ステータスを `review_pending` に更新（まだチェックリストは `[x]` にしない）
2. **レビュー承認時**: チェックリストを `[x]` に更新、次のステップに `← 現在` を移動、ステータスを `completed` に更新
3. **レビューでスキップ時**: チェックリストを `[-]` に更新（スキップを示す）、次のステップに `← 現在` を移動、ステータスを `skipped` に更新
4. **成果物作成時**: 成果物リンクを更新
5. **履歴追記**: 主要なアクションを履歴に追記（レビュー結果も記録）

### 知識状態の管理

論点・仮説・アプローチの検証状況は `Output/プロジェクトサマリ.md` で管理する（workflow.md には持たない）。workflow.md はプロセス進捗と意思決定の記録に専念する。

| セクション | 管理先 | 更新契機 |
|-----------|--------|---------|
| 論点・仮説の検証状況 | Output/プロジェクトサマリ.md | 論点・仮説に変化があった場合 |
| 重要な意思決定 | workflow.md（追記型） | スコープ変更・方針転換時 |
| プロセス進捗 | workflow.md | ステップの状態変化時 |

### 更新例

```markdown
## 進捗チェックリスト

### Phase 0: 提案
- [x] Step 1: 提案書作成 [AI] ✓ 2026-01-28
- [x] Step 2: 提案用スライド構成設計 [AI] ✓ 2026-01-28
- [x] Step 3: 初期デスクトップ調査 [人間] ✓ 2026-02-05
- [ ] Step 4: 提案書更新 ← 現在 [AI]
...

## 成果物リンク
- 与件: [Input/与件.md](Input/与件.md)
- 提案書: [Output/提案書.md](Output/提案書.md)
- 初期調査結果: [Input/desk_research_v1.md](Input/desk_research_v1.md)
...

## 履歴
| 日付 | ステップ | アクション | 備考 |
|------|----------|------------|------|
| 2026-01-28 | - | プロジェクト開始 | |
| 2026-01-28 | Step 1 | 提案書作成完了 | Output/提案書.md |
| 2026-02-05 | Step 2 | 初期調査完了 | 人間タスク |
```

## CLAUDE.md との役割分担

プロジェクトの状態を3ファイルで管理する。`CLAUDE.md` は静的な基本情報、`workflow.md` はプロセス進捗、`Output/プロジェクトサマリ.md` は知識状態（論点・仮説・リスク等）を担う。

| 情報 | 管理先 |
|------|-------|
| クライアント名・納期・スコープ | CLAUDE.md（静的） |
| 作業上の注意・ファイル配置 | CLAUDE.md（静的） |
| 論点・仮説の検証状況・リスク | Output/プロジェクトサマリ.md |
| 重要な意思決定 | workflow.md |
| 現在のステップ・チェックリスト | workflow.md |
| 成果物リンク | workflow.md |
| 履歴ログ | workflow.md |
